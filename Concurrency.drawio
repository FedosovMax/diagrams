<mxfile host="app.diagrams.net" modified="2021-02-25T18:21:23.139Z" agent="5.0 (Windows)" etag="J6vmPq8Hqf1E3ReVYuvt" version="14.2.9" type="github">
  <diagram id="dARw1I-tyCDDxnHPdXPz" name="Page-1">
    <mxGraphModel dx="3197" dy="2735" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-68" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="640" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-65" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="540" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-54" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="130" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-108" width="540" height="118" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-45" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-236" width="540" height="36" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-42" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-450" width="540" height="144" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-39" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-600" width="540" height="100" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-34" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-880" width="540" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-27" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-1335" width="540" height="125" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-8" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="160" y="-1310" width="440" height="65" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-83" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="3200" width="420" height="210" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-80" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="2820" width="330" height="220" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-78" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="2530" width="285" height="150" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-65" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="35" y="2130" width="585" height="250" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-57" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="1824" width="390" height="190" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-49" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="1565" width="360" height="150" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-43" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="30" y="660" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-40" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="40" y="1100" width="370" height="181" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-33" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="30" y="120" width="660" height="70" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-26" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#FF8000;align=left;" parent="1" vertex="1">
          <mxGeometry x="30" y="510" width="660" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-12" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="30" y="400" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-1" value="&lt;font style=&quot;font-size: 18px&quot;&gt;4. Компоновка объектов&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="30" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-3" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Проектирование потокобезопасного класса:&lt;/b&gt; &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;1. идентификация переменных, формирующих состояние объекта.&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;font color=&quot;#FF8000&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;2. идентификация инвариантов, ограничивающих переменные состояния и постусловий.&amp;nbsp;&lt;/font&gt; &lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;3. создание политики для управления конкурентным доступом к состоянию объекта.&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="124" width="520" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-4" value="Политики синхронизации (synchronization policy). (рекомендуется документировать. @GuardedBy(&quot;this&quot;)" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="200" width="600" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-5" value="&lt;div&gt;Примитивные переменные содержат все состояние объекта, &lt;br&gt;&lt;/div&gt;&lt;div&gt;ссылочные включают в себя другие объекты влияющие на потокобезопасность&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="230" width="470" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-6" value="&lt;div&gt;final уменьшает пространство состояний переменных. (state space) &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Инварианты&lt;/b&gt;: различают valid и invalid состояния. (Long.MIN_VALUE - Long.MAX_VALUE valid)&lt;/div&gt;&lt;div&gt;&lt;b&gt;Постусловия&lt;/b&gt;: 17 -&amp;gt; 18 -&amp;gt; 19 -&amp;gt; 20 (допустимые переходы состояний)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="320" width="540" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-7" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Обеспечивайте потокобезопасность, учитывая роль инвариантов и постусловий.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="370" width="490" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-15" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.1.2. Операции зависимые от состояния&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="405" width="290" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-17" value="&lt;div align=&quot;left&quot;&gt;Методы с предусловиями основанными на состоянии. (&lt;b&gt;state-dependent&lt;/b&gt; методы. Проверяющие что очередь &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;пустая а значит с нее нельзя удалять объекты) &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="445" width="630" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-18" value="Если предусловие не соблюдается: " style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="200" y="480" width="220" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-19" value="&lt;b&gt;&lt;font color=&quot;#00CC00&quot;&gt;One thread: &lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="510" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-20" value="&lt;b&gt;&lt;font color=&quot;#007FFF&quot;&gt;Multithreading: &lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="510" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-21" value="Операция завершается безрезультатно." style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="530" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-22" value="&lt;div&gt;Ожидает появления потока принимающий имеющееся &lt;br&gt;&lt;/div&gt;&lt;div&gt;условие для продолжения работы.&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="532" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-23" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;wait()&lt;/b&gt; и &lt;b&gt;notify()&lt;/b&gt; сложны в применении по этому вместо них используются библиотечные классы, такие как &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;блокирующие очереди&lt;/b&gt; или &lt;b&gt;семафоры&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Блокирующие библиотечные классы (&lt;b&gt;BlockingQueue&lt;/b&gt;, &lt;b&gt;Semaphore &lt;/b&gt;и другие синхронизаторы) &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="580" width="620" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-27" value="" style="endArrow=none;html=1;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="309.66" y="570" as="sourcePoint" />
            <mxPoint x="310" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-28" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Объект владеет состоянием которое инкапсулирует&lt;/b&gt; и отвечает за управление многопоточным доступом.&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="700" width="620" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-29" value="&lt;div&gt;&lt;b&gt;Объект не владеет состоянием объектов передаваемых в методы&lt;/b&gt; если только он не предназначен для&lt;/div&gt;&lt;div&gt;передачи права владения.&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="730" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-30" value="&lt;div&gt;&lt;b&gt;Коллекционные классы часто демонстрируют форму раздельного владения&lt;/b&gt;: они владеют состоянием &lt;br&gt;&lt;/div&gt;&lt;div&gt;коллекции, но хранящиеся у себя объекты передают клиентскому коду&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="770" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-34" value="&lt;div&gt;&lt;b&gt;Непотокобезопасный &lt;/b&gt;объект можно использовать безопасно с о&lt;b&gt;граничением одним потоком&lt;/b&gt; или &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;блокировкой&lt;/b&gt;. &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="867" width="580" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-36" value="&lt;div&gt;&lt;b&gt;Инкапсуляция &lt;/b&gt;упрощает создание потокобезопасных классов, обеспечивая &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ограничение одним экземпляром&lt;/b&gt; (instance confinement), которое часто называется &lt;b&gt;запиранием &lt;/b&gt;(confinement).&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;&lt;i&gt;Объект инкапсулируется в другой объект, к которому имеют доступ только некоторые &lt;br&gt;&lt;/i&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;&lt;i&gt;известные ветви кода, а не вся программа&lt;/i&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="900" width="650" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-37" value="&lt;div&gt;&lt;b&gt;Инкапсуляция данных в объекте ограничивает доступ к ним только методами объекта, что упрощает &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;обеспечение постоянного доступа с удержанием замка.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="970" width="610" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-38" value="&lt;div align=&quot;left&quot;&gt;Ограниченные экземпляром объекты не должны выходить за пределы своей области действия. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Объект может быть ограничен &lt;b&gt;экземпляром класса &lt;/b&gt;(например, приватным членом класса), &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;лексической областью&lt;/b&gt; (например, локальной переменной) или &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;потоком &lt;/b&gt;(например, объектом, который передается из метода в метод внутри одного потока). &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Публикуйте объекты осторожно.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1010" width="570" height="80" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-39" value="&lt;div align=&quot;left&quot;&gt;@ThreadSafe&lt;br&gt;public class PersonSet {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; @GuardedBy(&quot;this&quot;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final Set&amp;lt;Person&amp;gt; mySet = new HashSet&amp;lt;Person&amp;gt;();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public synchronized void addPerson(Person p) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; mySet.add(p);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public synchronized boolean containsPerson(Person p) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return mySet.contains(p);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="1110" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-41" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;ArrayList &lt;/b&gt;и &lt;b&gt;HashMap&lt;/b&gt;, не-потокобезопасны, но их можно использовать в многопоточных средах. &lt;b&gt;Оберточные &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;фабричные методы&lt;/b&gt; (Collections.&lt;b&gt;synchronizedList &lt;/b&gt;и др.) с помощью паттерна &lt;b&gt;декоратора&lt;/b&gt;обертывают коллекции &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;синхронизированными объектами, заставляя методы интерфейса пересылать запросы базовым коллекционным &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;объектам&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1295" width="670" height="60" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-42" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Ограничение одним экземпляром упрощает создание потокобезопасных классов, позволяя анализировать их &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;потокобезопасность без проверки всей программы.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1365" width="670" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-44" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.1.3. Владение состоянием&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="665" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-45" value="&lt;div align=&quot;left&quot;&gt;По принципу &lt;b&gt;ограничения одним экземпляром&lt;/b&gt; работает и &lt;b&gt;мониторный шаблон Java. &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;(Java monitor pattern (Hoare, 1974)&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1460" width="510" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-46" value="Монитор используется также библиотечными классами &lt;b&gt;Vector &lt;/b&gt;и &lt;b&gt;HashTable&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1495" width="450" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-47" value="&lt;div align=&quot;left&quot;&gt;Вместо монитора можно использовать &lt;b&gt;приватный замок&lt;/b&gt;, который благодаря &lt;b&gt;инкапсуляции &lt;/b&gt;не позволяет &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;захватить себя извне избавляя от необходимости проверки всей программы. &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1520" width="630" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-48" value="&lt;div align=&quot;left&quot;&gt;public class PrivateLock {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final Object myLock = new Object();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; @GuardedBy(&quot;myLock&quot;) Widget widget;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; void someMethod() {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; synchronized(myLock) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // Обратиться и изменить состояние виджета&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="1575" width="320" height="130" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-53" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="40" y="830" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-54" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-53" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-55" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;4.2. Ограничение одним экземпляром&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-53" vertex="1">
          <mxGeometry x="10" y="5" width="290" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-56" value="&lt;div align=&quot;left&quot;&gt;@ThreadSafe&lt;br&gt;public class CountingFactorizer implements Servlet {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final AtomicLong count = new AtomicLong(0);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public long getCount() { return count.get(); }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public void service(ServletRequest req, ServletResponse resp) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; BigInteger i = extractFromRequest(req);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; BigInteger[] factors = factor(i);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; count.incrementAndGet();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; encodeIntoResponse(resp, factors);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="1835" width="380" height="170" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-58" value="&lt;div align=&quot;left&quot;&gt;Мы добавили &lt;b&gt;AtomicLong &lt;/b&gt;в объект, который не всегда поддерживал внутреннее состояние, и результирующий &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;композитный &lt;/b&gt;объект стал потокобезопасным.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="1785" width="640" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-59" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="1410" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-24" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="QMmgmNxQZZJa730i63d_-59" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-25" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.2.1. Мониторный шаблон Java&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-59" vertex="1">
          <mxGeometry x="10" y="5" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-63" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Делегировать &lt;/b&gt;потокобезопасность более чем одной базовой переменной состояния возможно, если эти &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;переменные &lt;b&gt;независимы&lt;/b&gt;, то есть композитный класс не накладывает инварианты с их участием.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="2085" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-64" value="&lt;div align=&quot;left&quot;&gt;public class VisualComponent {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final List&amp;lt;KeyListener&amp;gt; keyListeners = new CopyOnWriteArrayList&amp;lt;KeyListener&amp;gt;();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final List&amp;lt;MouseListener&amp;gt; mouseListeners = new CopyOnWriteArrayList&amp;lt;MouseListener&amp;gt;();&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public void addKeyListener(KeyListener listener) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; keyListeners.add(listener);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public void addMouseListener(MouseListener listener) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; mouseListeners.add(listener);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public void removeKeyListener(KeyListener listener) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; keyListeners.remove(listener);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public void removeMouseListener(MouseListener listener) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; mouseListeners.remove(listener);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="2140" width="570" height="230" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-66" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="1739" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-31" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-66" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-32" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;4.3. Делегирование потокобезопасности&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-66" vertex="1">
          <mxGeometry x="10" y="5" width="310" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-67" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="2400" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-68" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-67" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-69" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;4.4. Добавление функциональности в существующие потокобезопасные классы&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-67" vertex="1">
          <mxGeometry x="10" y="5" width="590" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-70" value="&lt;div align=&quot;left&quot;&gt;Мы можем &lt;b&gt;расширять существующие потокобезопасные классы&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Но это определенная зависимость от родителя. если его замок измениться, но у наследника будет &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;неправильный замок&lt;/b&gt;. &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="2440" width="580" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-71" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Лучше использовать готовые инструменты многопоточности&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="2500" width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-72" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="2040" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-61" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="QMmgmNxQZZJa730i63d_-72" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-62" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.3.2. Независимые переменные состояния&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-72" vertex="1">
          <mxGeometry x="10" y="5" width="310" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-73" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="2710" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-74" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="QMmgmNxQZZJa730i63d_-73" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-75" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.4.1. Блокировка на стороне клиента&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-73" vertex="1">
          <mxGeometry x="10" y="5" width="270" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-76" value="&lt;div align=&quot;left&quot;&gt;Блокировка на стороне клиента (&lt;b&gt;client-side locking&lt;/b&gt;) или &lt;b&gt;внешняя блокировка&lt;/b&gt; может решить проблему &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;расширения синхронизированного класса &lt;b&gt;ArrayList &lt;/b&gt;в обертке &lt;b&gt;synchronizedList&lt;/b&gt;, где у нас нет доступа к &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;внутреннему объекту. &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="2760" width="610" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-77" value="&lt;div align=&quot;left&quot;&gt;@ThreadSafe&lt;br&gt;public class BetterVector&amp;lt;E&amp;gt; extends Vector&amp;lt;E&amp;gt; {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public synchronized boolean putIfAbsent(E x) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; boolean absent = !contains(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (absent)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; add(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return absent;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="2540" width="280" height="130" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-79" value="&lt;div align=&quot;left&quot;&gt;@ThreadSafe&lt;br&gt;public class ListHelper&amp;lt;E&amp;gt; {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public List&amp;lt;E&amp;gt; list =&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Collections.synchronizedList(new ArrayList&amp;lt;E&amp;gt;());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; ...&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public boolean putIfAbsent(E x) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; synchronized (list) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; boolean absent = !list.contains(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (absent)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; list.add(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return absent;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="2830" width="320" height="200" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-81" value="&lt;div align=&quot;left&quot;&gt;В то время как расширение класса&lt;b&gt; нарушает инкапсуляцию реализации&lt;/b&gt;, блокировка на стороне клиента &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;нарушает инкапсуляцию политики синхронизации&lt;/b&gt;.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="3050" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-82" value="&lt;div align=&quot;left&quot;&gt;@ThreadSafe&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;public class ImprovedList&amp;lt;T&amp;gt; implements List&amp;lt;T&amp;gt; {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; private final List&amp;lt;T&amp;gt; list;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public ImprovedList(List&amp;lt;T&amp;gt; list) { this.list = list; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public synchronized boolean putIfAbsent(T x) {&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; boolean contains = list.contains(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; if (contains)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; list.add(x);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; return !contains;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; public synchronized void clear() { list.clear(); }&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; // ... делегировать остальные списковые методы схожим образом&lt;br&gt;}&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="50" y="3208" width="400" height="190" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-84" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="3100" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-85" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="QMmgmNxQZZJa730i63d_-84" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-86" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.4.2. Компоновка&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-84" vertex="1">
          <mxGeometry x="10" y="5" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-87" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Добавить атомарную операцию&lt;/b&gt; в существующий класс поможет &lt;b&gt;компоновка &lt;/b&gt;(composition). Класс &lt;i&gt;ImprovedList &lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;реализует списковые операции, передавая их в базовый экземпляр &lt;i&gt;List &lt;/i&gt;и добавляя атомарный метод &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;i&gt;putIfAbsent&lt;/i&gt;, через который клиент должен обращаться к базовому списку.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="3140" width="650" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-88" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="3430" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-89" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-88" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-90" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;4.5. Документирование политик синхронизации&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-88" vertex="1">
          <mxGeometry x="10" y="5" width="360" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-91" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Документируйте гарантии потокобезопасности класса&lt;/b&gt; для клиентов и политику синхронизации — &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;для сопроводителей.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Каждое применение механизмов &lt;b&gt;synchronized&lt;/b&gt;, &lt;b&gt;volatile &lt;/b&gt;или любого потокобезопасного класса отражает &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;политику синхронизации&lt;/b&gt;. Как проектный элемент программы она должна быть задокументирована, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;причем лучше всего — на этапе разработки.&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="3470" width="610" height="80" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-95" value="Проектирование потокобезопасного класса содержит следующие шаги: &lt;br&gt;&lt;b&gt;1. Найти переменные формирующие состояние объекта. &lt;br&gt;2. Найти инварианты и постусловия которые могут повлиять на состояние объекта. &lt;br&gt;3. Создать политику для управления конкурентным доступом к состоянию объекта.&lt;/b&gt; &lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Ограниченные одним экземпляром классы&lt;/b&gt; (singleton) и &lt;b&gt;инкапсуляция &lt;/b&gt;значительно упрощают работу с &lt;/div&gt;&lt;div&gt;многопоточными программами.&lt;/div&gt;&lt;div&gt;&lt;b&gt;Монитор &lt;/b&gt;может быть полезен для работы с многопоточностью, но это очень базовый инструмент и не &lt;br&gt;&lt;/div&gt;&lt;div&gt;самый продвинутый. &lt;/div&gt;&lt;br&gt;&lt;div&gt;Мы можем &lt;b&gt;делегировать &lt;/b&gt;обеспечение потокобезопасности &lt;b&gt;потокобезопасным объектам&lt;/b&gt;.&lt;/div&gt;&lt;div&gt;Их может быть даже несколько. &lt;/div&gt;&lt;br&gt;&lt;div&gt;Мы можем &lt;b&gt;расширять потокобезопасные классы&lt;/b&gt; добавляя в них новый функционал и он будет &lt;br&gt;&lt;/div&gt;&lt;div&gt;потокобезопасным, но это влечет за собой &lt;b&gt;уязвимости&lt;/b&gt;. Также как и &lt;b&gt;внешняя блокировка&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Компоновка &lt;/b&gt;гарантированно обеспечит потокобезопасность но вероятно наложит &lt;b&gt;ограничения &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;на производительность&lt;/b&gt;. &lt;/div&gt;&lt;br&gt;&lt;div&gt;Все эти интересные подходы нужно &lt;b&gt;документировать &lt;/b&gt;иначе малейшие изменения могут создать &lt;br&gt;&lt;/div&gt;&lt;div&gt;трудноуловимые баги.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="3630" width="610" height="290" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-93" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="30" y="3580" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-94" value="&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;Summary&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="3585" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-96" value="&lt;font style=&quot;font-size: 18px&quot;&gt;5. Строительные блоки&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="870" y="30" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-97" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="70" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-8" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-97" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-10" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;5.1. Синхронизированные коллекции &lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-97" vertex="1">
          <mxGeometry x="10" y="5" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-98" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="70" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-99" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="QMmgmNxQZZJa730i63d_-98" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-100" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;4.1. Проектирование потокобезопасного класса&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-98" vertex="1">
          <mxGeometry x="10" y="5" width="360" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-101" value="&lt;div align=&quot;left&quot;&gt;Синхронизированные классы коллекций: &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="110" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-102" value="&lt;b&gt;Vector, Hashtable, Collections.synchronized****&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="130" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-103" value="&lt;div&gt;&lt;b&gt;Инкапсулируют состояние &lt;/b&gt;и &lt;b&gt;синхронизируют &lt;/b&gt;каждый публичный метод, позволяя только одному потоку &lt;br&gt;&lt;/div&gt;&lt;div&gt;обратиться к коллекции&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="150" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-104" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="30" y="280" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-16" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="QMmgmNxQZZJa730i63d_-104" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-11" value="&lt;font style=&quot;font-size: 14px&quot;&gt;4.1.1. Сбор требований к синхронизации&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-104" vertex="1">
          <mxGeometry x="10" y="5" width="290" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-105" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="200" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-106" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="QMmgmNxQZZJa730i63d_-105" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-107" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.1.1. Проблемы синхронизированных коллекций&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-105" vertex="1">
          <mxGeometry x="10" y="5" width="340" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-108" value="&lt;div align=&quot;left&quot;&gt;Поскольку синхронизированные коллекции поддерживают блокировку на стороне клиента, существует &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;возможность создания новых операций, атомарных по отношению к другим операциям над коллекцией, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;если известен замок.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="240" width="620" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-110" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" parent="1" vertex="1">
          <mxGeometry x="890" y="300" width="310.11" height="90" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-111" value="&lt;div align=&quot;left&quot;&gt;Доставка последнего элемента из коллекции или итеративный обход выдают исключение, что &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;нежелательно&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="410" width="550" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-112" value="&lt;div&gt;В течение всего времени итеративного обхода владея замком на Vector, мы не позволяем другим потокам &lt;br&gt;&lt;/div&gt;&lt;div&gt;изменять его (см. листинг 5.4). К сожалению, от этого страдает конкурентность.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="445" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-113" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="490" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-114" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="QMmgmNxQZZJa730i63d_-113" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-115" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.1.2 Итераторы и исключение ConcurrentModificationException&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-113" vertex="1">
          <mxGeometry x="10" y="5" width="430" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-116" value="&lt;div&gt;Класс Vector как и другие современные коллекции содержат проблемы составных действий. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Обычно обход коллекции выполняется с помощью &lt;b&gt;Iterator &lt;/b&gt;в сочетании с замком. Итераторы не &lt;br&gt;&lt;/div&gt;&lt;div&gt;проектировались для конкурентного выполнения изменений, по этому в случае обнаружения изменений &lt;br&gt;&lt;/div&gt;&lt;div&gt;коллекции во время обхода, итератор выдает &lt;i&gt;ConcurrentModificationException&lt;/i&gt;, то есть быстро &lt;br&gt;&lt;/div&gt;&lt;div&gt;отказывают (&lt;b&gt;fail-fast&lt;/b&gt;). &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="545" width="620" height="90" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-117" value="&lt;div align=&quot;left&quot;&gt;Во время обхода коллекции нужно держать замок, если коллекция большая, это непроизводительно.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Это может также вызвать взаимную блокировку.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Альтернативой является клонирование коллекции для обхода, но замок все равно будет на коллекции. &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="640" width="610" height="50" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-118" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="710" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-119" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="QMmgmNxQZZJa730i63d_-118" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-120" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.1.3 Скрытые итераторы&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="QMmgmNxQZZJa730i63d_-118" vertex="1">
          <mxGeometry x="10" y="5" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="QMmgmNxQZZJa730i63d_-121" value="&lt;div align=&quot;left&quot;&gt;Методы &lt;b&gt;containsall&lt;/b&gt;, &lt;b&gt;removeAll &lt;/b&gt;и &lt;b&gt;retainAll &lt;/b&gt;выполняют скрытый обход коллекций. Они также вызывают &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;ConcurrentModificationException &lt;/b&gt;по&lt;b&gt; &lt;/b&gt;этому &lt;br&gt; &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="755" width="580" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-1" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="800" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-2" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="8ZVaQMv6SIjStNIvOHQu-1" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-3" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;5.2. Конкурентные коллекции &lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="8ZVaQMv6SIjStNIvOHQu-1" vertex="1">
          <mxGeometry x="10" y="5" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-4" value="&lt;div align=&quot;left&quot;&gt;Версия &lt;b&gt;Java 5.0&lt;/b&gt;. предлагает хеш-массив &lt;b&gt;ConcurrentHashMap &lt;/b&gt;вместо синхронизированных хешированных &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;реализаций &lt;b&gt;Map&lt;/b&gt;, и &lt;b&gt;CopyOnWriteArrayList &lt;/b&gt;вместо синхронизированных реализаций &lt;b&gt;List &lt;/b&gt;для &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;случаев, где обход является доминирующей операцией.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="850" width="620" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-5" value="&lt;div align=&quot;left&quot;&gt;Интерфейс &lt;b&gt;ConcurrentMap &lt;/b&gt;поддерживает составные действия &quot;добавить если отсутствует&quot;, замена и условное &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;даление.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="910" width="650" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-6" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Замена синхронизированных коллекций конкурентными коллекциями может предложить значительные &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;улучшения масштабируемости при небольшом риске.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="960" width="630" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-8" value="Queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1060" y="1010" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-9" value="BlockingQueue" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1390" y="1100" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-10" value="&lt;div&gt;ConcurrentLinkedQueue&lt;/div&gt;&lt;div&gt;FIFO&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1100" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-11" value="&lt;div&gt;PriorityQueue&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1050" y="1100" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-12" value="LinkedList" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1210" y="1100" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-13" value="" style="endArrow=classic;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="8ZVaQMv6SIjStNIvOHQu-8" target="8ZVaQMv6SIjStNIvOHQu-10" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1010" y="1080" as="sourcePoint" />
            <mxPoint x="1060" y="1030" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-14" value="" style="endArrow=classic;html=1;exitX=0.47;exitY=1.053;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" parent="1" source="8ZVaQMv6SIjStNIvOHQu-8" target="8ZVaQMv6SIjStNIvOHQu-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1102.5" y="1050" as="sourcePoint" />
            <mxPoint x="975" y="1110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-15" value="" style="endArrow=classic;html=1;exitX=0.597;exitY=1.03;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="8ZVaQMv6SIjStNIvOHQu-8" target="8ZVaQMv6SIjStNIvOHQu-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1131.1" y="1051.59" as="sourcePoint" />
            <mxPoint x="1135" y="1110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-16" value="" style="endArrow=classic;html=1;exitX=0.868;exitY=1.03;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.366;entryY=0.007;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="8ZVaQMv6SIjStNIvOHQu-8" target="8ZVaQMv6SIjStNIvOHQu-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1147.6100000000001" y="1050.8999999999999" as="sourcePoint" />
            <mxPoint x="1265.163967611336" y="1110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-17" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;BlockingQueue &lt;/b&gt;добавляет блокирующие операции вставки и извлечения. Блокирующие очереди полезны &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;в паттернах проектирования &quot;&lt;b&gt;Производитель-потребитель&lt;/b&gt;&quot;. &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1150" width="600" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-18" value="&lt;div&gt;&lt;b&gt;Java 6&lt;/b&gt;. &lt;b&gt;ConcurrentSkipListMap &lt;/b&gt;и &lt;b&gt;ConcurrentSkipListSet &lt;/b&gt;конкурентные версии &lt;b&gt;SortedMap &lt;/b&gt;и &lt;b&gt;SortedSet&lt;/b&gt; (&lt;i&gt;TreeMap &lt;/i&gt;и&lt;/div&gt;&lt;div&gt;&lt;i&gt;Treeset&lt;/i&gt;, обернутых в &lt;i&gt;synchronizedMap&lt;/i&gt;)&lt;br&gt; &lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1200" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-20" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="1250" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-21" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="8ZVaQMv6SIjStNIvOHQu-20" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-22" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.2.1 ConcurrentHashMap&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="8ZVaQMv6SIjStNIvOHQu-20" vertex="1">
          <mxGeometry x="10" y="5" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-23" value="Класс &lt;b&gt;ConcurrentHashMap &lt;/b&gt;— это хешированный ассоциативный массив &lt;b&gt;Map&lt;/b&gt;, аналогичный хеш-массиву &lt;b&gt;HashMap&lt;/b&gt;, но &lt;b&gt;использующий другую замковую стратегию&lt;/b&gt;." style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1295" width="550" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-24" value="&lt;div align=&quot;left&quot;&gt;Вместо &lt;b&gt;синхронизации каждого метода&lt;/b&gt; на общем замке и ограничения доступа одним потоком за раз он &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;использует &lt;b&gt;замковое расщепление&lt;/b&gt; на полосы (&lt;b&gt;lock striping&lt;/b&gt;)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1340" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-25" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;ConcurrentHashMap &lt;/b&gt;предоставляет итераторы, которые не выдают исключение &lt;b&gt;ConcurrentModificationException&lt;/b&gt;, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;являются не быстро отказывающими, а &lt;b&gt;слабо непротиворечивыми &lt;/b&gt;(&lt;b&gt;weakly consistent&lt;/b&gt;).&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1385" width="670" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-26" value="&lt;div&gt;Однако семантика методов, работающих на всем ассоциативном массиве &lt;b&gt;Map&lt;/b&gt;, таких как &lt;b&gt;size &lt;/b&gt;и &lt;b&gt;isEmpty&lt;/b&gt;, &lt;br&gt;&lt;/div&gt;&lt;div&gt;была &lt;b&gt;немного ослаблена&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1430" width="610" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-27" value="&lt;div&gt;В большинстве случаев замена синхронизированных реализаций ассоциативного массива &lt;b&gt;Map &lt;/b&gt;на хеш-массив &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ConcurrentHashMap &lt;/b&gt;приводит к &lt;b&gt;более высокой масштабируемости&lt;/b&gt;. Но если вам необходимо только &lt;b&gt;защитить &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ассоциативный массив замком для эксклюзивного доступа&lt;/b&gt;, то &lt;b&gt;ConcurrentHashMap &lt;/b&gt;вам не подойдет.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1470" width="650" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-28" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="1540" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-29" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="8ZVaQMv6SIjStNIvOHQu-28" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-30" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.2.2 Дополнительные атомарные операции над ассоциативным массивом&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="8ZVaQMv6SIjStNIvOHQu-28" vertex="1">
          <mxGeometry x="10" y="5" width="520" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-31" value="&lt;div align=&quot;left&quot;&gt;Операции «&lt;b&gt;добавить, если отсутствует&lt;/b&gt;», «&lt;b&gt;удалить, если равно&lt;/b&gt;» и «&lt;b&gt;заменить, если равно&lt;/b&gt;» сразу задаются &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;интерфейсом &lt;b&gt;ConcurrentMap &lt;/b&gt;как &lt;b&gt;атомарные&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1585" width="640" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-32" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="1630" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-33" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#ffe6cc;strokeColor=#FF8000;" parent="8ZVaQMv6SIjStNIvOHQu-32" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-34" value="&lt;font style=&quot;font-size: 14px&quot;&gt;5.2.3 CopyOnWriteArrayList&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="8ZVaQMv6SIjStNIvOHQu-32" vertex="1">
          <mxGeometry x="10" y="5" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-35" value="&lt;div&gt;Класс &lt;b&gt;CopyOnWriteArrayList &lt;/b&gt;является конкурентной версией синхронизированного спискового класса &lt;b&gt;List&lt;/b&gt;, &lt;br&gt;&lt;/div&gt;&lt;div&gt;который предлагает более высокую конкурентность и устраняет необходимость в блокировке или &lt;br&gt;&lt;/div&gt;&lt;div&gt;клонировании коллекции во время итеративного обхода.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1676" width="630" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-36" value="&lt;div&gt;&lt;b&gt;Итераторы &lt;/b&gt;не выдают исключения &lt;b&gt;ConcurrentModificationException &lt;/b&gt;и возвращают элементы, не измененные&lt;/div&gt;&lt;div&gt; с момента создания итератора.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1739" width="640" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-37" value="&lt;div&gt;&lt;b&gt;Копирование массива обходится дорого&lt;/b&gt;, его целесообразно использовать только когда &lt;b&gt;итеративный обход &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;встречается гораздо чаще, чем изменение&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div&gt;Например, доставка уведомления требует &lt;b&gt;итеративного обхода списка&lt;/b&gt; зарегистрированных слушателей и &lt;br&gt;&lt;/div&gt;&lt;div&gt;вызова каждого из них, а регистрация или дерегистрация слушателей происходят гораздо реже.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="890" y="1780" width="650" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-38" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="880" y="1860" width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-39" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="8ZVaQMv6SIjStNIvOHQu-38" vertex="1">
          <mxGeometry width="660" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-40" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;5.3. Блокирующие очереди и паттерн «производитель-потребитель» &lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="8ZVaQMv6SIjStNIvOHQu-38" vertex="1">
          <mxGeometry x="10" y="5" width="510" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-42" value="&lt;font style=&quot;font-size: 72px&quot; color=&quot;#CC0000&quot;&gt;&lt;b&gt;REST&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=85;" parent="1" vertex="1">
          <mxGeometry x="-1965" y="-1570" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-43" value="&lt;p&gt;&lt;font style=&quot;font-size: 11px&quot; color=&quot;#CC0000&quot;&gt;RE&lt;/font&gt;&lt;font size=&quot;3&quot;&gt;presentational &lt;font color=&quot;#CC0000&quot;&gt;S&lt;/font&gt;tate &lt;font color=&quot;#CC0000&quot;&gt;T&lt;/font&gt;ransfer&lt;/font&gt;&lt;/p&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-1980" y="-1525" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-44" value="Это &lt;b&gt;архитектура&lt;/b&gt;, т.е. &lt;b&gt;принципы построения распределенных гипермедиа систем&lt;/b&gt;,&lt;br&gt;того что другими словами называется &lt;b&gt;World Wide Web&lt;/b&gt;, включая универсальные&lt;br&gt;&lt;b&gt;способы обработки и передачи состояний ресурсов по HTTP&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-1480" width="500" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-45" value="&lt;i&gt;Автор идеи и термина Рой Филдинг 2000г.&lt;/i&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-1990" y="-1420" width="260" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-47" value="SOAP" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-1387" y="-1520" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-48" value="WSDL" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-1100" y="-1520" width="50" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-49" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Что нам дает REST подход:&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;&lt;/b&gt;&lt;br&gt;- &lt;b&gt;Масштабируемость &lt;/b&gt;взаимодействия компонентов системы (приложения)&lt;br&gt;- &lt;b&gt;Общность &lt;/b&gt;интерфейсов&lt;br&gt;- Независимое &lt;b&gt;внедрение компонентов&lt;/b&gt;&lt;br&gt;- &lt;b&gt;Промежуточные компоненты&lt;/b&gt;, &lt;b&gt;снижающие задержку&lt;/b&gt;, усиливающие &lt;b&gt;безопасность&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-1375" width="490" height="100" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-50" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Когда использовать REST?&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;- Когда есть &lt;b&gt;ограничение пропускной способности соединения&lt;/b&gt;&lt;br&gt;- Если необходимо &lt;b&gt;кэшировать запросы&lt;/b&gt;&lt;br&gt;- Если система предполагает значительное &lt;b&gt;масштабирование&lt;/b&gt;&lt;br&gt;- В сервисах, использующих &lt;b&gt;AJAX&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-1270" width="390" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-51" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Преимущества REST:&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;- &lt;b&gt;Отсутствие дополнительных внутренних прослоек&lt;/b&gt;, что означает передачу данных &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;в том же виде, что и сами данные. Т.е. данные не оборачиваются в XML, как это делает &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;SOAP и XML-RPC, не используется AMF, как это делает Flash и т.д. &lt;b&gt;Просто отдаются сами данные.&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;- Каждая единица информации (&lt;b&gt;ресурс&lt;/b&gt;) однозначно определяется URL — это значит, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;что &lt;b&gt;URL по сути является первичным ключом для единицы данных&lt;/b&gt;. Причем совершенно &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;не имеет значения, в каком формате находятся данные по адресу — это может быть и HTML, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;и jpeg, и документ Microsoft Word.&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;- Как происходит &lt;b&gt;управление информацией ресурса — это целиком и полностью основывается &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;на протоколе передачи данных&lt;/b&gt;. Наиболее распространенный протокол конечно же &lt;b&gt;HTTP&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Для HTTP действие над данными задается с помощью методов : &lt;b&gt;GET &lt;/b&gt;(получить), &lt;b&gt;PUT &lt;/b&gt;(добавить, заменить), &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;POST &lt;/b&gt;(добавить, изменить, удалить), &lt;b&gt;DELETE &lt;/b&gt;(удалить). Таким образом, действия &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;CRUD &lt;/b&gt;(Create-Read-Update-Delete) могут выполняться как со всеми 4-мя методами, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;так и только с помощью GET и POST.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-1160" width="620" height="240" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-52" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Что такое RESTful:&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;Чтобы распределенная система считалась сконструированной по REST архитектуре (Restful), &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;необходимо, чтобы она удовлетворяла следующим критериям:&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;- &lt;b&gt;Client-Server.&lt;/b&gt; Система должна быть разделена на клиентов и на серверов. Разделение &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;интерфейсов означает, что, например, клиенты не связаны с хранением данных, которое остается внутри &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;каждого сервера, так что мобильность кода клиента улучшается. Серверы не связаны с интерфейсом &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;пользователя или состоянием, так что серверы могут быть проще и масштабируемы. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Серверы и клиенты могут быть заменяемы и разрабатываться независимо, пока интерфейс не изменяется.&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Stateless&lt;/b&gt;. Сервер не должен хранить какой-либо информации о клиентах. В запросе должна храниться &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;вся необходимая информация для обработки запроса и если необходимо, идентификации клиента.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Cache&lt;/b&gt;․ Каждый ответ должен быть отмечен является ли он кэшируемым или нет, для предотвращения &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;повторного использования клиентами устаревших или некорректных данных в ответ на дальнейшие запросы.&lt;br&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Uniform Interface&lt;/b&gt;. Единый интерфейс определяет интерфейс между клиентами и серверами. Это упрощает &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;и отделяет архитектуру, которая позволяет каждой части развиваться самостоятельно.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-905" width="620" height="270" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-53" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Четыре принципа единого интерфейса:&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Identification of resources&lt;/b&gt; (&lt;b&gt;основан на ресурсах&lt;/b&gt;). В REST &lt;b&gt;ресурсом &lt;/b&gt;является все то, чему можно дать &lt;b&gt;имя&lt;/b&gt;. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Например,пользователь, изображение, предмет (майка, голодная собака, текущая погода) и т.д. Каждый &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;ресурс в REST должен быть &lt;b&gt;идентифицирован &lt;/b&gt;посредством стабильного &lt;b&gt;идентификатора&lt;/b&gt;, который не &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;меняется при изменении состояния ресурса. &lt;b&gt;Идентификатором в REST является URI&lt;/b&gt;.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Manipulation of resources through representations&lt;/b&gt;. &lt;b&gt;(Манипуляции над ресурсами через представления).&lt;/b&gt; &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Представление в REST используется для выполнения действий над ресурсами. Представление ресурса &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;представляет собой текущее или желаемое состояние ресурса. Например, если ресурсом является &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;пользователь, то представлением может являться XML или HTML описание этого пользователя.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Self-descriptive messages (само-документируемые сообщения).&lt;/b&gt; Под само-описательностью имеется ввиду, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;что запрос и ответ должны хранить в себе всю необходимую информацию для их обработки. Не должны быть &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;дополнительные сообщения или кэши для обработки одного запроса. Другими словами отсутствие состояния, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;сохраняемого между запросами к ресурсам. Это очень важно для масштабирования системы.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;HATEOAS (hypermedia as the engine of application state)&lt;/b&gt;. Статус ресурса передается через содержимое body, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;параметры строки запроса, заголовки запросов и запрашиваемый URI (имя ресурса). Это называется гипермедиа &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;(или гиперссылки с гипертекстом). HATEOAS также означает, что, в случае необходимости ссылки могут &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;содержатся в теле ответа (или заголовках) для поддержки URI , извлечения самого объекта или запрошенных &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;объектов.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2040" y="-610" width="640" height="310" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-54" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Layered System.&lt;/b&gt; В REST допускается разделить систему на иерархию слоев но с условием, что каждый компонент &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;может видеть компоненты только непосредственно следующего слоя. Например, если вы вызывайте службу PayPal &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;а он в свою очередь вызывает службу Visa, вы о вызове службы Visa ничего не должны знать.&lt;br&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Code-On-Demand (опционально).&lt;/b&gt; В REST позволяется загрузка и выполнение кода или программы на стороне &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;клиента.&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;Важно !&lt;/b&gt; Сама архитектура REST не привязана к конкретным технологиям и протоколам, но в реалиях современного Веб, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;построение RESTful API почти всегда подразумевает использование HTTP и каких-либо распространенных форматов &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;представления ресурсов, например JSON, или, менее популярного сегодня, XML.&lt;br&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2068" y="-285" width="680" height="160" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-55" value="&lt;b&gt;Идемпотентность&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2072" y="-128" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-56" value="&lt;div align=&quot;left&quot;&gt;С точки зрения RESTful-сервиса, операция (или вызов сервиса) идемпотентна тогда, когда клиенты могут делать один &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;и тот же вызов неоднократно при одном и том же результате на сервере. Другими словами, &lt;b&gt;создание большого &lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;количества идентичных запросов имеет такой же эффект, как и один запрос&lt;/b&gt;. Заметьте, что в то время, как &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;идемпотентные операции производят один и тот же результат на сервере, ответ сам по себе может не быть тем же &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;самым (например, состояние ресурса может измениться между запросами).&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Методы &lt;b&gt;PUT &lt;/b&gt;и &lt;b&gt;DELETE &lt;/b&gt;по определению &lt;b&gt;идемпотентны&lt;/b&gt;. Тем не менее, есть один нюанс с методом DELETE. &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Проблема в том, что успешный DELETE-запрос возвращает статус 200 (OK) или 204 (No Content), но для последующих &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;запросов будет все время возвращать 404 (Not Found), Состояние на сервере после каждого вызова DELETE то же &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;самое, но ответы разные.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Методы &lt;b&gt;GET&lt;/b&gt;, &lt;b&gt;HEAD&lt;/b&gt;, &lt;b&gt;OPTIONS &lt;/b&gt;и &lt;b&gt;TRACE &lt;/b&gt;определены как безопасные. Это означает, что они предназначены только для &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;получения информации и не должны изменять состояние сервера. Они не должны иметь побочных эффектов, за &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;исключением безобидных эффектов, таких как: логирование, кеширование, показ баннерной рекламы или увеличение &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;веб-счетчика.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;По определению, &lt;b&gt;безопасные операции идемпотентны&lt;/b&gt;, так как они приводят к одному и тому же результату на &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;сервере. Безопасные методы реализованы как операции только для чтения. Однако безопасность не означает, что &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;сервер должен возвращать тот же самый результат каждый раз.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="-90" width="680" height="270" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-57" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;HTTP методы для создания RESTful сервисов&lt;/b&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;HTTP метод &lt;b&gt;GET &lt;/b&gt;используется для получения (или чтения) представления ресурса. В случае “удачного” (или не &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;содержащего ошибок) адреса, GET возвращается представление ресурса в формате XML или JSON в сочетании с &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;кодом состояния HTTP 200 (OK). &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;В случае наличия ошибок обычно возвращается код 404 (NOT FOUND) или 400 (BAD REQUEST).&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;GET http://www.example.com/api/v1.0/users (вернуть список пользователей)&lt;br&gt;GET http://www.example.com/api/v1.0/users/12345 (вернуть данные о пользователе с id 12345)&lt;br&gt;GET http://www.example.com/api/v1.0/users/12345/orders&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="190" width="650" height="150" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-58" value="&lt;div align=&quot;left&quot;&gt;HTTP метод &lt;b&gt;PUT &lt;/b&gt;обычно используется для предоставления возможности обновления ресурса. Тело запроса при &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;отправке PUT-запроса к существующему ресурсу URI должно содержать обновленные данные оригинального ресурса &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;(полностью, или только обновляемую часть).&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Для создания новых экземпляров ресурса предпочтительнее использование &lt;b&gt;POST &lt;/b&gt;запроса. В данном случае, при &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;создании экземпляра будет предоставлен корректный идентификатор экземпляра ресурса в возвращенных данных &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;об экземпляре.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;При успешном обновлении посредством выполнения &lt;b&gt;PUT &lt;/b&gt;запроса возвращается код 200 (или 204 если не был передан&lt;/div&gt;&lt;div align=&quot;left&quot;&gt; какой либо контент в теле ответа). &lt;b&gt;PUT не безопасная операция&lt;/b&gt;, так как вследствии ее выполнения происходит .&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;модификация (или создание) экземпляров ресурса на стороне сервера, но этот метод идемпотентен. Другими словами, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;создание или обновление ресурса посредством отправки &lt;b&gt;PUT &lt;/b&gt;запроса — ресурс не исчезнет, будет располагаться там&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;же, где и был при первом обращении, а также, многократное выполнение одного и того же &lt;b&gt;PUT &lt;/b&gt;запроса не изменит &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;общего состояния системы&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;PUT http://www.example.com/api/v1.0/users/12345 (обновить данные пользователя с id 12345)&lt;br&gt;PUT http://www.example.com/api/v1.0/users/12345/orders/98765 (обновить данные заказа с id 98765 для пользователя &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;с id 12345)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2068" y="360" width="680" height="260" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-59" value="&lt;br&gt;&lt;div align=&quot;left&quot;&gt;HTTP метод &lt;b&gt;POST &lt;/b&gt;запрос наиболее часто используется для создания новых ресурсов. На практике он используется &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;для создания вложенных ресурсов. Другими словами, при создании нового ресурса, POST запрос отправляется к &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;родительскому ресурсу и, таким образом, сервис берет на себя ответственность на установление связи создаваемого &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;ресурса с родительским ресурсом, назначение новому ресурсу ID и т.п.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;При успешном создании ресурса возвращается HTTP код 201, а также в заголовке `Location` передается адрес &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;созданного ресурса.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;POST не является безопасным или идемпотентным запросом. Потому рекомендуется его использование для не &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;идемпотентных запросов. В результате выполнения идентичных POST запросов предоставляются сильно похожие, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;но не идентичные данные.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;POST http://www.example.com/api/v1.0/customers (создать новый ресурс в разделе customers)&lt;br&gt;POST http://www.example.com/api/v1.0/customers/12345/orders (создать заказ для ресурса с id 12345)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2068" y="615" width="670" height="220" as="geometry" />
        </mxCell>
        <mxCell id="8ZVaQMv6SIjStNIvOHQu-60" value="&lt;div align=&quot;left&quot;&gt;HTTP метод &lt;b&gt;DELETE &lt;/b&gt;используется для удаления ресурса, идентифицированного конкретным URI (ID).&lt;br&gt;При успешном удалении возвращается 200 (OK) код HTTP, совместно с телом ответа, содержащим данные удаленного &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;ресурса. Также возможно использование HTTP кода 204 (NO CONTENT) без тела ответа. Согласно спецификации &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;HTTP, DELETE запрос идемпотентен. Если вы выполняете DELETE запрос к ресурсу, он удаляется. Повторный &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;DELETE запрос к ресурсу закончится также: ресурс удален. Если DELETE запрос используется для декремента &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;счетчика, DELETE запрос не является идемпотентным. Используйте POST для не идемпотентных операций.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;Тем не менее, существует предостережение об идемпотентности DELETE. Повторный DELETE запрос к ресурсу &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;часто сопровождается 404 (NOT FOUND) кодом HTTP по причине того, что ресурс уже удален (например из базы &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;данных) и более не доступен. Это делает DELETE операцию не идемпотентной, но это общепринятый компромисс &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;на тот случай, если ресурс был удален из базы данных, а не помечен, как удаленный.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;DELETE http://www.example.com/api/v1.0/customers/12345 (удалить из customers ресурс с id 12345)&lt;br&gt;DELETE http://www.example.com/api/v1.0/customers/12345/orders/21 (удалить у ресурса с id 12345 заказ с id 21)&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="-2067" y="860" width="670" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-1" value="&lt;div&gt;&lt;font color=&quot;#009900&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 85px&quot;&gt;Spring&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="-1640" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-2" value="&lt;div align=&quot;left&quot;&gt;&lt;ul&gt;&lt;li&gt;singleton (creates the singleton bean. default value)&lt;br&gt;&lt;/li&gt;&lt;li&gt;prototype (will return a different instance every time)&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;&lt;font color=&quot;#009900&quot;&gt;request &lt;font color=&quot;#000000&quot;&gt;(creates a bean instance for a single HTTP request)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#009900&quot;&gt;session &lt;font color=&quot;#000000&quot;&gt;(creates a bean instance for an HTTP Session)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#009900&quot;&gt;application &lt;font color=&quot;#000000&quot;&gt;(creates the bean instance for the lifecycle of a ServletContext)&lt;/font&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#009900&quot;&gt;websocket &lt;font color=&quot;#000000&quot;&gt;(creates it for a particular WebSocket session)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="-1500" width="440" height="130" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-3" value="&lt;b&gt;Bean scopes:&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="-1510" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-4" value="&lt;div align=&quot;left&quot;&gt;The last four scopes mentioned, &lt;font color=&quot;#009900&quot;&gt;request&lt;/font&gt;, &lt;font color=&quot;#009900&quot;&gt;session&lt;/font&gt;, &lt;font color=&quot;#009900&quot;&gt;application &lt;/font&gt;and &lt;font color=&quot;#009900&quot;&gt;websocket&lt;/font&gt;, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;are only available in a web-aware application.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="-1375" width="420" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-6" value="&lt;div align=&quot;left&quot;&gt;&lt;b&gt;proxyMode &lt;/b&gt;attribute is necessary because at the moment of the instantiation of the &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;web application context, there is no active request.&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;@RequestScope &lt;/b&gt;annotation can be changed instead&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="-1235" width="450" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-7" value="&lt;div align=&quot;left&quot;&gt;@Bean&lt;br&gt;@Scope(value = WebApplicationContext.SCOPE_REQUEST, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; proxyMode = ScopedProxyMode.TARGET_CLASS)&lt;br&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="170" y="-1305" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-11" value="&lt;b&gt;Example&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="-1340" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-21" value="&lt;font color=&quot;#EA6B66&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 85px&quot;&gt;Hibernate&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2650" y="-1640" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-22" value="&lt;font color=&quot;#808080&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 24px&quot;&gt;Caches&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2720" y="-1490" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-23" value="Кэш используется для того чтобы уменьшить количество дорогостоящих обращений в базу данных. " style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2510" y="-1450" width="570" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-24" value="&lt;div align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;Кеш первого уровня (First-level cache):&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-1410" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-25" value="&lt;div align=&quot;left&quot;&gt;Кеш первого уровня всегда привязан к объекту сессии. Hibernate всегда по умолчанию использует &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;этот кеш и его нельзя отключить.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-1380" width="550" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-26" value="&lt;div align=&quot;left&quot;&gt;SharedDoc persistedDoc = (SharedDoc) session.load(SharedDoc.class, docId);&lt;br&gt;System.out.println(persistedDoc.getName());&lt;br&gt;user1.setDoc(persistedDoc);&lt;br&gt;&lt;br&gt;persistedDoc = (SharedDoc) session.load(SharedDoc.class, docId);&lt;br&gt;System.out.println(persistedDoc.getName());&lt;br&gt;user2.setDoc(persistedDoc);&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2540" y="-1327.5" width="430" height="100" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-28" value="&lt;div align=&quot;left&quot;&gt;В этом примере будет выполнен &lt;b&gt;1 запрос в базу&lt;/b&gt;, несмотря на то, что делается 2 вызова load(), &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;так как эти вызовы происходят в &lt;b&gt;контексте одной сессии&lt;/b&gt;. Во время второй попытки загрузить &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;план с тем же идентификатором будет использован &lt;b&gt;кеш сессии.&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-1190" width="540" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-29" value="&lt;div align=&quot;left&quot;&gt;При использовании метода &lt;b&gt;load&lt;/b&gt;() Hibernate не выгружает из БД данные до тех пор пока они не &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;потребуются. Иными словами — в момент, когда осуществляется первый вызов load, мы получаем &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;прокси объект или сами данные в случае, если данные уже были в кеше сессии. Поэтому в коде ю&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;присутствует getName() чтобы 100% вытянуть данные из БД. Тут также открывается прекрасная &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;возможность для потенциальной оптимизации. В случае прокси объекта мы можем связать два &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;объекта не делая запрос в базу, в отличии от метода &lt;b&gt;get&lt;/b&gt;(). При использовании методов &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;b&gt;save&lt;/b&gt;(), &lt;b&gt;update&lt;/b&gt;(), &lt;b&gt;saveOrUpdate&lt;/b&gt;(), &lt;b&gt;load&lt;/b&gt;(), &lt;b&gt;get&lt;/b&gt;(), &lt;b&gt;list&lt;/b&gt;(), &lt;b&gt;iterate&lt;/b&gt;(), &lt;b&gt;scroll&lt;/b&gt;() всегда будет задействован &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;кеш первого уровня. Собственно, тут нечего больше добавить.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-1130" width="560" height="120" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-30" value="&lt;div align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;Кеш второго уровня (Second-level cache):&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-990" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-31" value="&lt;div align=&quot;left&quot;&gt;Если кеш первого уровня привязан к объекту сессии, то кеш второго уровня привязан к объекту-фабрике &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;сессий (Session Factory object). Что как бы подразумевает, что видимость этого кеша гораздо шире кеша &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;первого уровня. Пример:&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-970" width="590" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-32" value="&lt;div align=&quot;left&quot;&gt;Чтобы включить кэш второго уровня нужно добавить в конфигурационный файл следующее: &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-910" width="520" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-33" value="&lt;div align=&quot;left&quot;&gt;&amp;lt;property name=&quot;hibernate.cache.provider_class&quot; &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; value=&quot;net.sf.ehcache.hibernate.SingletonEhCacheProvider&quot;/&amp;gt;&lt;br&gt;//или&amp;nbsp; в более старых версиях&lt;br&gt;//&amp;lt;property name=&quot;hibernate.cache.provider_class&quot; value=&quot;org.hibernate.cache.EhCacheProvider&quot;/&amp;gt;&lt;br&gt;&amp;lt;property name=&quot;hibernate.cache.use_second_level_cache&quot; value=&quot;true&quot;/&amp;gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="-877" width="540" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-35" value="&lt;div align=&quot;left&quot;&gt;Хибернейт сам не реализует кеширование как таковое. А лишь предоставляет структуру для его &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;реализации. Можно быбрать из списка: &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-770" width="540" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-36" value="&lt;div align=&quot;left&quot;&gt;- EHCache&lt;br&gt;- OSCache&lt;br&gt;- SwarmCache&lt;br&gt;- JBoss TreeCache&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-37" value="&lt;div align=&quot;left&quot;&gt;Вам также понадобится отдельно настроить и саму &lt;b&gt;реализацию кеша&lt;/b&gt;. В случае с &lt;b&gt;EHCache &lt;/b&gt;это нужно &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;сделать в файле &lt;i&gt;ehcache.xml.&lt;/i&gt; Ну и в завершение еще нужно указать самому хибернейту, что именно &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;кешировать. К счастью, это очень легко можно сделать с помощью &lt;b&gt;аннотаций&lt;/b&gt;, например так:&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-655" width="590" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-38" value="&lt;div align=&quot;left&quot;&gt;@Entity&lt;br&gt;@Table(name = &quot;shared_doc&quot;)&lt;br&gt;@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)&lt;br&gt;public class SharedDoc{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; private Set&amp;lt;User&amp;gt; users;&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="-594" width="340" height="100" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-40" value="&lt;div align=&quot;left&quot;&gt;После этого второй уровень кэша будет включен и в примере ниже будет выполнен один запрос в базу&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-480" width="580" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-41" value="&lt;div align=&quot;left&quot;&gt;Session session = factory.openSession();&lt;br&gt;SharedDoc doc = (SharedDoc) session.load(SharedDoc.class, 1L);&lt;br&gt;System.out.println(doc.getName());&lt;br&gt;session.close();&lt;br&gt;&lt;br&gt;session = factory.openSession();&lt;br&gt;doc = (SharedDoc) session.load(SharedDoc.class, 1L);&amp;nbsp; &amp;nbsp;&lt;br&gt;System.out.println(doc.getName());&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&lt;br&gt;session.close(); &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="-446" width="370" height="130" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-43" value="&lt;div align=&quot;left&quot;&gt;Хибернейт хранит информацию в виде массивов строк, чисел и т. д. И идентификатор объекта выступает &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;указателем на эту информацию. Концептуально это нечто вроде Map, в которой id объекта — ключ, &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;а массивы данных — значение. Приблизительно можно представить себе это так:&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-296" width="600" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-44" value="&lt;div align=&quot;left&quot;&gt;1 -&amp;gt; { &quot;Pupkin&quot;, 1, null , {1,2,5} }&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="-226" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-46" value="&lt;div align=&quot;left&quot;&gt;Что есть очень разумно, учитывая сколько лишней памяти занимает каждый объект.&lt;br&gt;Помимо вышесказанного, следует помнить — зависимости Вашего класса по умолчанию также не &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;кешируются. Например, если рассмотреть класс выше — SharedDoc, то при выборке коллекция &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;users будет доставаться из БД, а не из кеша второго уровня. Если Вы хотите также кешировать и &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;зависимости, то класс должен выглядеть так:&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="-190" width="550" height="80" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-47" value="&lt;div align=&quot;left&quot;&gt;@Entity&lt;br&gt;@Table(name = &quot;shared_doc&quot;)&lt;br&gt;@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)&lt;br&gt;public class SharedDoc{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; @Cache(usage = CacheConcurrencyStrategy.READ_WRITE)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; private Set&amp;lt;User&amp;gt; users;&lt;br&gt;}&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="-100" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-49" value="&lt;div align=&quot;left&quot;&gt;И последняя деталь — чтение из кеша второго уровня происходит только в том случае, если нужный &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;объект не был найден в кеше первого уровня.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="25" width="570" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-51" value="&lt;div align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;&lt;b&gt;Кеш запросов (Query cache):&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="70" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-52" value="&lt;div align=&quot;left&quot;&gt;По умолчанию этот кэш отключен, для включения нужно использовать следующую конфигурацию: &lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="100" width="550" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-53" value="&amp;lt;property name=&quot;hibernate.cache.use_query_cache&quot; value=&quot;true&quot;/&amp;gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2525" y="140" width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-55" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="184" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-56" value="&lt;div align=&quot;left&quot;&gt;Query query = session.createQuery(&quot;from SharedDoc doc where doc.name = :name&quot;);&lt;br&gt;query.setCacheable(true);&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2530" y="189" width="470" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-57" value="&lt;div align=&quot;left&quot;&gt;Кеш запросов похож на кеш второго уровня. Но в отличии от него — ключом к данным кеша выступает &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;не идентификатор объекта, а совокупность параметров запроса. А сами данные — это идентификаторы &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;объектов соответствующих критериям запроса. Таким образом, этот кеш рационально использовать с &lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;кешем второго уровня.&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="2520" y="236" width="590" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-58" value="&lt;b style=&quot;font-size: 14px&quot;&gt;Стратегии кэширования:&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="310" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-59" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;- Read-only&lt;br&gt;- Read-write&lt;br&gt;- Nonstrict-read-write&lt;br&gt;- Transactional&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="370" width="130" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-61" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Стратегии кеширования определяют поведения кеша в определенных ситуациях. &lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Выделяют четыре группы:&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="330" width="460" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-62" value="Что нужно знать:" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="2520" y="460" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-63" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Во время разработки приложения, особенно сначала, очень удобно видеть действительно ли кешируются &lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;те или иные запросы, для этого нужно указать фабрике сессий следующие свойства:&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="490" width="600" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-64" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&amp;lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&amp;gt;&lt;br&gt;&amp;lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/&amp;gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2525" y="540" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-66" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;В дополнение фабрика сессий также может генерировать и сохранять статистику использования всех &lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;объектов, регионов, зависимостей в кеше:&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="590" width="580" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-67" value="&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&amp;lt;property name=&quot;hibernate.generate_statistics&quot; value=&quot;true&quot;/&amp;gt;&lt;br&gt;&amp;lt;property name=&quot;hibernate.cache.use_structured_entries&quot; value=&quot;true&quot;/&amp;gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="640" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WsvQsJm2ObX6OhKaBQ0v-69" value="&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 12px&quot; align=&quot;left&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;Для этого есть объекты Statistics для фабрики и SessionStatistics для сессии.&lt;br&gt;&lt;br&gt;Методы сессии:&lt;br&gt;flush() — синхронизирует объекты сессии с БД и в то же время обновляет сам кеш сессии.&lt;br&gt;evict() — нужен для удаления объекта из кеша cессии.&lt;br&gt;contains() — определяет находится ли объект в кеше сессии или нет.&lt;br&gt;clear() — очищает весь кеш&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="2520" y="670" width="520" height="160" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
